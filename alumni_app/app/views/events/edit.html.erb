<h1>Edit Your Event</h1>
<p><em>Find me in app/views/events/edit.html.erb</em></p>

<%= form_for @event do |f| %>
  <%= f.text_field :event_name, :placeholder => "Enter the event name..." %><br />
  <%= f.text_field :event_location, id: 'location', :placeholder => "Enter the event location..." %><br />
  <%= f.text_area :event_description, :placeholder => "Describe the event..." %><br />
  <%= f.text_field :event_site, :placeholder => "Link to the event website..." %><br />
  <%= f.submit 'Update your event'  %><br />
<% end %>

<%= link_to "Cancel", event_path %>

<div id="map-canvas"></div>

<script type="text/javascript">
  // Autocomplete variables
  var input = document.getElementById('location');
  var searchform = document.getElementById('form1');
  var place;
  var autocomplete = new google.maps.places.Autocomplete(input);

  // Google Map variables
  var map;
  var marker;

  // Add listener to detect autocomplete selection
  google.maps.event.addListener(autocomplete, 'place_changed', function () {
    place = autocomplete.getPlace();
    // console.log(place;)
  });

  // Add listener to search
  searchform.addEventListener("submit", function() {
    var newlatlong = new google.maps.LatLng(place.geometry.location.lat(),place.geometry.location.lng());
    map.setCenter(newlatlong);
    marker.setPosition(newlatlong);
    map.setZoom(12);
  })

  // Reset the input box on click
  input.addEventListener('click', function(){
    input.value = "";
  });

  function initialize() {
    var myLatlng = new google.maps.LatLng(51.517503,-0.133896);
    var mapOptions = {
      zoom: 1,
      center: myLatlng
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

    marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title: 'Main map'
    });
  }

  google.maps.event.addDomListener(window, 'load', intialize);
</script>
